import{c as Y}from"./algosdk.478d7268.js";var Q={exports:{}};(function(X){(function(){function D(E,a){return a?Y(E):E.slice?D[m(E)]:function(d,k){E(d={exports:{}}),D[m(k)]=d.exports};function m(d){return d.split("/").slice(-1).toString().replace(".js","")}}var N=X;D(function(E){String.random=function(m,d){var k="";for(m=m||24,d=d||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";m-- >0;)k+=d.charAt(Math.floor(Math.random()*d.length));return k},String.match=function(m,d){var k,b;return typeof m!="string"?!1:(typeof d=="string"&&(d={"=":d}),d=d||{},k=d["="]||d["*"]||d[">"]||d["<"],m===k?!0:b!==d["="]?!1:(k=d["*"]||d[">"],m.slice(0,(k||"").length)===k?!0:b!==d["*"]?!1:b!==d[">"]&&b!==d["<"]?m>=d[">"]&&m<=d["<"]:b!==d[">"]&&m>=d[">"]||b!==d["<"]&&m<=d["<"]))},String.hash=function(m,d){if(typeof m=="string"){if(d=d||0,!m.length)return d;for(var k=0,b=m.length,c;k<b;++k)c=m.charCodeAt(k),d=(d<<5)-d+c,d|=0;return d}};var a=Object.prototype.hasOwnProperty;Object.plain=function(m){return m?m instanceof Object&&m.constructor===Object||Object.prototype.toString.call(m).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(m,d){for(var k in m)if(a.call(m,k)&&(!d||d.indexOf(k)==-1))return!1;return!0},Object.keys=Object.keys||function(m){var d=[];for(var k in m)a.call(m,k)&&d.push(k);return d},function(){var m,d=setTimeout,k=0,b=0,c=typeof setImmediate!=""+m&&setImmediate||function(u,j){return typeof MessageChannel==""+m?d:((u=new MessageChannel).port1.onmessage=function(O){O.data==""&&j()},function(O){j=O,u.port2.postMessage("")})}(),f=d.check=d.check||typeof performance!=""+m&&performance||{now:function(){return+new Date}};d.hold=d.hold||9,d.poll=d.poll||function(u){if(d.hold>=f.now()-k&&b++<3333){u();return}c(function(){k=f.now(),u()},b=0)}}(),function(){var m=setTimeout,d=m.turn=m.turn||function(j){k.push(j)==1&&b(u)},k=d.s=[],b=m.poll,c=0,f,u=function(){(f=k[c++])&&f(),(c==k.length||c==99)&&(k=d.s=k.slice(c),c=0),k.length&&b(u)}}(),function(){var m,d=setTimeout,k=d.turn;(d.each=d.each||function(b,c,f,u){u=u||9,function j(O,o,_){if(o=(O=(b||[]).splice(0,u)).length){for(var h=0;h<o&&m===(_=c(O[h]));h++);if(m===_){k(j);return}}f&&f(_)}()})()}()})(D,"./shim"),D(function(E){E.exports=function a(f,d,k){if(!f)return{to:a};var b,c=typeof d=="function",f=(this.tag||(this.tag={}))[f]||c&&(this.tag[f]={tag:f,to:a._={next:function(j){var O;(O=this.to)&&O.next(j)}}});if(c){var u={off:a.off||(a.off=function(){if(this.next===a._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=a._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:a._,next:d,the:f,on:this,as:k};return(u.back=f.last||f).to=u,f.last=u}return(f=f.to)&&b!==d&&f.next(d),f}})(D,"./onto"),D(function(E){E.exports=function(a){return a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"&&a!=1/0&&a!=-1/0&&a===a||!!a&&typeof a["#"]=="string"&&Object.keys(a).length===1&&a["#"]}})(D,"./valid"),D(function(E){D("./shim");function a(){var f=+new Date;return b<f?(d=0,b=f+a.drift):b=f+(d+=1)/k+a.drift}a.drift=0;var m=-1/0,d=0,k=999,b=m,c;a.is=function(f,u,j){var O=u&&f&&f._&&f._[">"]||j;if(!!O)return typeof(O=O[u])=="number"?O:m},a.ify=function(f,u,j,O,o){(f=f||{})._=f._||{},o&&(f._["#"]=o);var _=f._[">"]||(f._[">"]={});return c!==u&&u!=="_"&&(typeof j=="number"&&(_[u]=j),c!==O&&(f[u]=O)),f},E.exports=a})(D,"./state"),D(function(E){D("./shim");function a(m){var d={s:{}},k=d.s;m=m||{max:999,age:1e3*9},d.check=function(c){return k[c]?b(c):!1};var b=d.track=function(c){var f=k[c]||(k[c]={});return f.was=d.now=+new Date,d.to||(d.to=setTimeout(d.drop,m.age+9)),f};return d.drop=function(c){d.to=null,d.now=+new Date;var f=Object.keys(k);console.STAT&&console.STAT(d.now,+new Date-d.now,"dup drop keys"),setTimeout.each(f,function(u){var j=k[u];j&&(c||m.age)>d.now-j.was||delete k[u]},0,99)},d}E.exports=a})(D,"./dup"),D(function(E){D("./onto"),E.exports=function(d,k){if(!!this.on){var b=(this.opt||{}).lack||9e3;if(typeof d!="function"){if(!d)return;var f=d["#"]||d,c=(this.tag||"")[f];return c?(k&&(c=this.on(f,k),clearTimeout(c.err),c.err=setTimeout(function(){c.off()},b)),!0):void 0}var f=k&&k["#"]||a(9);if(!d)return f;var u=this.on(f,d,k);return u.err=u.err||setTimeout(function(){u.off(),u.next({err:"Error: No ACK yet.",lack:!0})},b),f}};var a=String.random||function(){return Math.random().toString(36).slice(2)}})(D,"./ask"),D(function(E){function a(o){return o instanceof a?(this._={$:this}).$:this instanceof a?a.create(this._={$:this,opt:o}):new a(o)}a.is=function(o){return o instanceof a||o&&o._&&o===o._.$||!1},a.version=.202,a.chain=a.prototype,a.chain.toJSON=function(){},D("./shim"),a.valid=D("./valid"),a.state=D("./state"),a.on=D("./onto"),a.dup=D("./dup"),a.ask=D("./ask"),function(){a.create=function(n){n.root=n.root||n,n.graph=n.graph||{},n.on=n.on||a.on,n.ask=n.ask||a.ask,n.dup=n.dup||a.dup();var r=n.$.opt(n.opt);return n.once||(n.on("in",o,n),n.on("out",o,n),n.on("put",g,n),a.on("create",n),n.on("create",n)),n.once=1,r};function o(n){if(!!n){if(n.out===o){this.to.next(n);return}var r=this,l=r.as,x=l.at||l,T=x.$,w=x.dup,G,I=n.DBG;if((G=n["#"])||(G=n["#"]=d(9)),!w.check(G)){if(w.track(G),G=n._,n._=typeof G=="function"?G:function(){},n.$&&n.$===(n.$._||"").$||(n.$=T),n["@"]&&!n.put&&t(n),!x.ask(n["@"],n))if(I&&(I.u=+new Date),n.put){_(n);return}else n.get&&a.on.get(n,T);I&&(I.uc=+new Date),r.to.next(n),I&&(I.ua=+new Date),!(n.nts||n.NTS)&&(n.out=o,x.on("out",n),I&&(I.ue=+new Date))}}}function _(n){if(!!n){var r=n._||"",l=r.root=((r.$=n.$||"")._||"").root;if(n["@"]&&r.faith&&!r.miss){n.out=o,l.on("out",n);return}r.latch=l.hatch,r.match=l.hatch=[];var x=n.put,T=r.DBG=n.DBG,w=+new Date;if(A=A||w,!(x["#"]&&x["."])){T&&(T.p=w),r["#"]=n["#"],r.msg=n,r.all=0,r.stun=1;var G=Object.keys(x);console.STAT&&console.STAT(w,((T||r).pk=+new Date)-w,"put sort");var I=0,J,M,C,W,q,P,H;(function U(F){if(J!=I){if(J=I,!(C=G[I])){console.STAT&&console.STAT(w,((T||r).pd=+new Date)-w,"put"),y(r);return}(W=x[C])?(H=W._)?C!==H["#"]?P=p+$(C)+"soul not same.":(q=H[">"])||(P=p+$(C)+"no state."):P=p+$(C)+"no meta.":P=p+$(C)+"no node.",M=Object.keys(W||{})}if(P){n.err=r.err=P,y(r);return}var z=0,R;for(F=F||0;F++<9&&(R=M[z++]);)if(R!=="_"){var K=W[R],V=q[R];if(u===V){P=p+$(R)+"on"+$(C)+"no state.";break}if(!b(K)){P=p+$(R)+"on"+$(C)+"bad "+typeof K+$(K);break}h(K,R,C,V,n),++B}if((M=M.slice(z)).length){k(U);return}++I,M=null,U(F)})()}}}a.on.put=_;function h(n,r,l,x,T){var w=T._||"",G=w.root,I=G.graph,J,M=I[l]||j,C=c(M,r,1),W=M[r],q=w.DBG;(J=console.STAT)&&(!I[l]||!W)&&(J.has=(J.has||0)+1);var P=S();if(x>P){setTimeout(function(){h(n,r,l,x,T)},(J=x-P)>v?v:J),console.STAT&&console.STAT((q||w).Hf=+new Date,J,"future");return}if(!(x<C)&&!(!w.faith&&x===C&&(n===W||s(n)<=s(W))&&!w.miss)){w.stun++;var H=T["#"]+w.all++,U={toString:function(){return H},_:w};U.toJSON=U.toString,G.dup.track(U)["#"]=T["#"],q&&(q.ph=q.ph||+new Date),G.on("put",{"#":U,"@":T["@"],put:{"#":l,".":r,":":n,">":x},ok:T.ok,_:w})}}function g(n){var r;(r=(n._||"").DBG)&&(r.pa=+new Date,r.pm=r.pm||+new Date);var l=this,x=l.as,T=x.graph,w=n._,G=n.put,I=G["#"],J=G["."],M=G[":"],C=G[">"];n["#"];var W;(W=w.msg)&&(W=W.put)&&(W=W[I])&&f(W,J,C,M,I),T[I]=f(T[I],J,C,M,I),(W=(x.next||"")[I])&&W.on("in",n),y(w),l.to.next(n)}function y(n,r){var l;if(!n.stop&&!(!n.err&&0<--n.stun)&&(n.stop=1,!!(l=n.root))){var x=n.match;x.end=1,x===l.hatch&&(!(x=n.latch)||x.end?delete l.hatch:l.hatch=x),n.hatch&&n.hatch(),setTimeout.each(n.match,function(T){T&&T()}),!(!(r=n.msg)||n.err||r.err)&&(r.out=o,n.root.on("out",r),e())}}function t(n){var r=n["@"]||"",l;if(!(l=r._)){var x=(x=n.$)&&(x=x._)&&(x=x.root)&&(x=x.dup);if(!(x=x.check(r)))return;n["@"]=x["#"]||n["@"];return}l.acks=(l.acks||0)+1,(l.err=n.err)&&(n["@"]=l["#"],y(l)),l.ok=n.ok||l.ok,!l.stop&&!l.crack&&(l.crack=l.match&&l.match.push(function(){i(l)})),i(l)}function i(n){!n||!n.root||n.stun||n.acks!==n.all||n.root.on("in",{"@":n["#"],err:n.err,ok:n.err?u:n.ok||{"":1}})}var p="Error: Invalid graph!",$=function(n){return" '"+(""+n).slice(0,9)+"...' "},s=JSON.stringify,v=2147483647,S=a.state,B=0,A,e=function(){B>999&&B/-(A-(A=+new Date))>1&&(a.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),e=function(){B=0})}}(),function(){a.on.get=function(_,h){var g=h._,y=_.get,t=y["#"],i=g.graph[t],p=y["."],$=g.next||(g.next={});$[t];var s=_._||{},v=s.DBG=_.DBG;if(v&&(v.g=+new Date),!i)return g.on("get",_);if(p){if(typeof p!="string"||u===i[p])return g.on("get",_);i=f({},p,c(i,p),i[p],t)}i&&o(_,i),g.on("get",_)};function o(_,h){var g=+new Date,y=_._||{},t=y.DBG=_.DBG,i=_["#"],p=d(9),$=Object.keys(h||"").sort(),s=((h||"")._||"")["#"];$.length;var v=_.$._.root,S=h===v.graph[s];console.STAT&&console.STAT(g,((t||y).gk=+new Date)-g,"got keys"),h&&function B(){g=+new Date;for(var A=0,e,n={},r;A<9&&(e=$[A++]);)f(n,e,c(h,e),h[e],s);$=$.slice(A),(r={})[s]=n,n=r;var l;S&&(l=function(){},l.ram=l.faith=!0),r=$.length,console.STAT&&console.STAT(g,-(g-(g=+new Date)),"got copied some"),t&&(t.ga=+new Date),v.on("in",{"@":i,"#":p,put:n,"%":r?p=d(9):u,$:v.$,_:l,DBG:t}),console.STAT&&console.STAT(g,+new Date-g,"got in"),r&&setTimeout.turn(B)}(),h||v.on("in",{"@":_["#"]})}a.on.get.ack=o}(),function(){a.chain.opt=function(o){o=o||{};var _=this,h=_._,g=o.peers||o;return Object.plain(o)||(o={}),Object.plain(h.opt)||(h.opt=o),typeof g=="string"&&(g=[g]),Object.plain(h.opt.peers)||(h.opt.peers={}),g instanceof Array&&(o.peers={},g.forEach(function(y){var t={};t.id=t.url=y,o.peers[y]=h.opt.peers[y]=h.opt.peers[y]||t})),m(o,function y(t){var i=this[t];if(this&&this.hasOwnProperty(t)||typeof i=="string"||Object.empty(i)){this[t]=i;return}i&&i.constructor!==Object&&!(i instanceof Array)||m(i,y)}),h.opt.from=o,a.on("opt",h),h.opt.uuid=h.opt.uuid||function(t){return a.state().toString(36).replace(".","")+String.random(t||12)},_}}();var m=function(o,_){Object.keys(o).forEach(_,o)},d=String.random,k=setTimeout.turn,b=a.valid,c=a.state.is,f=a.state.ify,u,j={},O;a.log=function(){return!a.log.off&&O.log.apply(O,arguments),[].slice.call(arguments).join(" ")},a.log.once=function(o,_,h){return(h=a.log.once)[o]=h[o]||0,h[o]++||a.log(_)},typeof window<"u"&&((window.GUN=window.Gun=a).window=window);try{typeof N<"u"&&(N.exports=a)}catch{}E.exports=a,(a.window||{}).console=(a.window||{}).console||{log:function(){}},(O=console).only=function(o,_){return O.only.i&&o===O.only.i&&O.only.i++&&(O.log.apply(O,arguments)||_)},a.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(D,"./root"),D(function(E){var a=D("./root");a.chain.back=function(k,b){var c;if(k=k||1,k===-1||k===1/0)return this._.root.$;if(k===1)return(this._.back||this._).$;var f=this,u=f._;if(typeof k=="string"&&(k=k.split(".")),k instanceof Array){var j=0,O=k.length,c=u;for(j;j<O;j++)c=(c||m)[k[j]];return d!==c?b?f:c:(c=u.back)?c.$.back(k,b):void 0}if(typeof k=="function"){for(var o,c={back:u};(c=c.back)&&d===(o=k(c,b)););return o}return typeof k=="number"?(u.back||u).$.back(k-1):this};var m={},d})(D,"./back"),D(function(E){var a=D("./root");a.chain.chain=function(y){var t=this,i=t._,p=new(y||t).constructor(t),$=p._,s;return $.root=s=i.root,$.id=++s.once,$.back=t._,$.on=a.on,$.on("in",a.on.in,$),$.on("out",a.on.out,$),p};function m(y){var t,i=this.as,p=i.back,$=i.root,s;if(y.$||(y.$=i.$),this.to.next(y),i.err){i.on("in",{put:i.put=u,$:i.$});return}if(t=y.get){if($.pass&&($.pass[i.id]=i),i.lex&&Object.keys(i.lex).forEach(function(v){s[v]=i.lex[v]},s=y.get=y.get||{}),t["#"]||i.soul){if(t["#"]=t["#"]||i.soul,y["#"]||(y["#"]=j(9)),p=$.$.get(t["#"])._,t=t["."]){if(o(p.put,t)&&(s=p.ask&&p.ask[t],(p.ask||(p.ask={}))[t]=p.$.get(t)._,p.on("in",{get:t,put:{"#":p.soul,".":t,":":p.put[t],">":h($.graph[p.soul],t)}}),s))return}else{if(s=p.ask&&p.ask[""],(p.ask||(p.ask={}))[""]=p,u!==p.put&&(p.on("in",p),s))return;y.$=p.$}return $.ask(c,y),$.on("in",y)}if(t["."])return i.get?(y={get:{".":i.get},$:i.$},(p.ask||(p.ask={}))[i.get]=y.$._,p.on("out",y)):(y={get:i.lex?y.get:{},$:i.$},p.on("out",y));if((i.ask||(i.ask={}))[""]=i,i.get)return t["."]=i.get,(p.ask||(p.ask={}))[i.get]=y.$._,p.on("out",y)}return p.on("out",y)}a.on.out=m;function d(y,t){t=t||this.as;var i=t.root,p=y.$||(y.$=t.$),$=(p||"")._||f,s=y.put||"",v=s["#"],S=s["."],B=u!==s["="]?s["="]:s[":"],A=s[">"]||-1/0,e;if(u!==y.put&&(u===s["#"]||u===s["."]||u===s[":"]&&u===s["="]||u===s[">"])){if(!O(s)){if(!(v=((s||"")._||"")["#"])){console.log("chain not yet supported for",s,"...",y,t);return}return p=t.root.$.get(v),setTimeout.each(Object.keys(s).sort(),function(n){n=="_"||u===(A=h(s,n))||t.on("in",{$:p,put:{"#":v,".":n,"=":s[n],">":A},VIA:y})})}t.on("in",{$:$.back.$,put:{"#":v=$.back.soul,".":S=$.has||$.get,"=":s,">":h($.back.put,S)},via:y});return}(y.seen||"")[t.id]||((y.seen||(y.seen=function(){}))[t.id]=t,t!==$&&(Object.keys(y).forEach(function(n){s[n]=y[n]},s={}),s.get=t.get||s.get,!t.soul&&!t.has?s.$$$=s.$$$||t.$:$.soul&&(s.$=t.$,s.$$=s.$$||$.$),y=s),b(y,t),(t.soul||y.$$)&&A>=h(i.graph[v],S)&&((s=i.$.get(v)._).put=g(s.put,S,A,B,v)),!$.soul&&A>=h(i.graph[v],S)&&(e=(i.$.get(v)._.next||"")[S])&&(e.put=B,typeof(s=O(B))=="string"&&(e.put=i.$.get(s)._.put||B)),this.to&&this.to.next(y),t.any&&setTimeout.each(Object.keys(t.any),function(n){(n=t.any[n])&&n(y)},0,99),t.echo&&setTimeout.each(Object.keys(t.echo),function(n){(n=t.echo[n])&&n.on("in",y)},0,99),((y.$$||"")._||$).soul&&(e=t.next)&&(e=e[S])&&(s={},Object.keys(y).forEach(function(n){s[n]=y[n]}),s.$=(y.$$||y.$).get(s.get=S),delete s.$$,delete s.$$$,e.on("in",s)),k(y,t))}a.on.in=d;function k(y,t){if(t=t||this.as||y.$._,!(y.$$&&this!==a.on)&&!(!y.put||t.soul)){var i=y.put||"",p=i["="]||i[":"],S,$=t.root,s=$.$.get(i["#"]).get(i["."])._;if(typeof(p=O(p))!="string"){this===a.on&&((s.echo||(s.echo={}))[t.id]=t);return}if(!((s.echo||(s.echo={}))[t.id]&&!($.pass||"")[t.id])){if(S=$.pass){if(S[p+t.id])return;S[p+t.id]=1}(s.echo||(s.echo={}))[t.id]=t,t.has&&(t.link=p);var v=$.$.get(s.link=p)._;(v.echo||(v.echo={}))[s.id]=s;var S=t.ask||"";(S[""]||t.lex)&&v.on("out",{get:{"#":p}}),setTimeout.each(Object.keys(S),function(B,A){!B||!(A=S[B])||A.on("out",{get:{"#":p,".":B}})},0,99)}}}a.on.link=k;function b(y,t){var i=y.put||"",p=u!==i["="]?i["="]:i[":"],$=t.root,s,v;if(u===p){if(t.soul&&u!==t.put||(v=(y.$$||y.$||"")._||"",y["@"]&&(u!==v.put||u!==t.put)))return;(s=t.link||y.linked)&&delete($.$.get(s)._.echo||"")[t.id],t.has&&(t.link=null),t.put=u,setTimeout.each(Object.keys(t.next||""),function(S,B){!(B=t.next[S])||(s&&delete($.$.get(s).get(S)._.echo||"")[B.id],B.on("in",{get:S,put:u,$:B.$}))},0,99);return}t.soul||y.$$||(s=O(p),v=y.$._||"",!((s===v.link||t.has&&!v.link)&&!(($.pass||"")[t.id]&&typeof s!="string"))&&(delete(v.echo||"")[t.id],b({get:t.get,put:u,$:y.$,linked:y.linked=y.linked||v.link},t)))}a.on.unlink=b;function c(y,t){var i=this.as,p=i.$._;p.root;var $=i.get||"",s=(y.put||"")[$["#"]]||"";if(!y.put||typeof $["."]=="string"&&u===s[$["."]]){if(u!==p.put||!p.soul&&!p.has)return;p.ack=(p.ack||0)+1,p.on("in",{get:p.get,put:p.put=u,$:p.$,"@":y["@"]});return}(y._||{}).miss=1,a.on.put(y)}var f={},u,j=String.random,O=a.valid,o=function(y,t){return y&&Object.prototype.hasOwnProperty.call(y,t)},_=a.state,h=_.is,g=_.ify})(D,"./chain"),D(function(E){var a=D("./root");a.chain.get=function(u,j,O){var o,_;if(typeof u=="string"){if(u.length==0)return(o=this.chain())._.err={err:a.log("0 length key!",u)},j&&j.call(o,o._.err),o;var h=this,g=h._,y=g.next||b;(o=y[u])||(o=u&&m(u,h)),o=o&&o.$}else if(typeof u=="function"){let v=function(S,B,A){if(!v.stun&&!((T=i.pass)&&!T[p])){var e=S.$._,n=(S.$$||"")._,r=(n||e).put,l=!e.has&&!e.soul,x={},T;if((l||f===r)&&(r=f===((T=S.put)||"")["="]?f===(T||"")[":"]?T:T[":"]:T["="]),typeof(T=a.valid(r))=="string"&&(r=f===(T=i.$.get(T)._.put)?t.not?f:r:T),!(t.not&&f===r)){if(f===t.stun){if((T=i.stun)&&T.on&&(g.$.back(function(w){if(T.on(""+w.id,x={}),(x.run||0)<v.id)return x}),!x.run&&T.on(""+e.id,x={}),!x.run&&n&&T.on(""+n.id,x={}),v.id>x.run&&((!x.stun||x.stun.end)&&(x.stun=T.on("stun"),x.stun=x.stun&&x.stun.last),x.stun&&!x.stun.end))){(x.stun.add||(x.stun.add={}))[p]=function(){v(S,B,1)};return}if(f===r&&(A=0),(T=i.hatch)&&!T.end&&f===t.hatch&&!A){if($[e.$._.id])return;$[e.$._.id]=1,T.push(function(){v(S,B,1)});return}$={}}if(i.pass){if(i.pass[p+e.id])return;i.pass[p+e.id]=1}if(t.on){t.ok.call(e.$,r,e.get,S,B||v);return}if(t.v2020){t.ok(S,B||v);return}Object.keys(S).forEach(function(w){T[w]=S[w]},T={}),S=T,S.put=r,t.ok.call(t.as,S,B||v)}}};if(j===!0)return d(this,u,j,O),this;o=this;var g=o._,t=j||{},i=g.root,p;t.at=g,t.ok=u;var $={};return v.at=g,(g.any||(g.any={}))[p=String.random(7)]=v,v.off=function(){v.stun=1,g.any&&delete g.any[p]},v.rid=k,v.id=t.run||++i.once,_=i.pass,(i.pass={})[p]=1,t.out=t.out||{get:{}},g.on("out",t.out),i.pass=_,o}else{if(typeof u=="number")return this.get(""+u,j,O);if(typeof(_=c(u))=="string")return this.get(_,j,O);(_=this.get.next)&&(o=_(this,u))}return o?(j&&typeof j=="function"&&o.get(j,O),o):((o=this.chain())._.err={err:a.log("Invalid get request!",u)},j&&j.call(o,o._.err),o)};function m(u,j){var O=j._,o=O.next,_=j.chain(),h=_._;return o||(o=O.next={}),o[h.get=u]=h,j===O.root.$?h.soul=u:(O.soul||O.has)&&(h.has=u),h}function d(u,j,O,o){var _=u._,h=0,g;return(g=_.soul||_.link)?j(g,o,_):_.jam?_.jam.push([j,o]):(_.jam=[[j,o]],u.get(function(t,i){if(!(f===t.put&&!_.root.opt.super&&(g=Object.keys(_.root.opt.peers).length)&&++h<=g)){i.rid(t);var p=(p=t.$)&&p._||{},$=0,s;for(g=_.jam,delete _.jam;s=g[$++];){var v=s[0];s=s[1],v&&v(p.link||p.soul||a.valid(t.put)||((t.put||{})._||{})["#"],s,t,i)}}},{out:{get:{".":!0}}}),u)}function k(u){var j=this.at||this.on;if(!u||j.soul||j.has)return this.off();if(!!(u=(u=(u=u.$||u)._||u).id)){j.map;var O;if((O=this.seen||(this.seen={}))[u])return!0;O[u]=!0}}var b={},c=a.valid,f})(D,"./get"),D(function(E){var a=D("./root");a.chain.put=function(o,_,h){var g=this,y=g._,t=y.root;h=h||{},h.root=y.root,h.run||(h.run=t.once),m(h,y.id),h.ack=h.ack||_,h.via=h.via||g,h.data=h.data||o,h.soul||(h.soul=y.soul||typeof _=="string"&&_);var i=h.state=h.state||a.state();return typeof o=="function"?(o(function(p){h.data=p,g.put(c,c,h)}),g):h.soul?(h.$=t.$.get(h.soul),h.todo=[{it:h.data,ref:h.$}],h.turn=h.turn||u,h.ran=h.ran||d,function p(){var $=h.todo,s=$.pop(),v=s.it;s.ref&&s.ref._.id;var S,B,A,e,n;if(m(h,s.ref),(e=s.todo)&&(B=e.pop(),v=v[B],e.length&&$.push(s)),B&&($.path||($.path=[])).push(B),!(S=j(v))&&!(n=a.is(v))){if(!Object.plain(v)){d.err(h,"Invalid data: "+b(v)+" at "+(h.via.back(function(T){T.get&&e.push(T.get)},e=[])||e.join("."))+"."+($.path||[]).join("."));return}for(var r=h.seen||(h.seen=[]),l=r.length;l--;)if(v===(e=r[l]).it){S=v=e.link;break}}if(B&&S)s.node=O(s.node,B,i,v);else{let T=function(w,G){var I=A.link["#"];G&&(G.off(),G.rid(w));var J=I||w.soul||(e=(w.$$||w.$)._||"").soul||e.link||((e=e.put||"")._||"")["#"]||e["#"]||((e=w.put||"")&&w.$$?e["#"]:(e["="]||e[":"]||"")["#"]);if(!I&&m(h,w.$),!J&&!s.link["#"]){(s.wait||(s.wait=[])).push(function(){T(w,G)});return}J||(J=[],(w.$$||w.$).back(function(M){if(e=M.soul||M.link)return J.push(e);J.push(M.get)}),J=J.reverse().join("/")),A.link["#"]=J,!n&&(((h.graph||(h.graph={}))[J]=A.node||(A.node={_:{}}))._["#"]=J),delete h.wait[x],A.wait&&setTimeout.each(A.wait,function(M){M&&M()}),h.ran(h)};if(!h.seen){d.err(h,"Data at root of graph must be a node (an object).");return}h.seen.push(A={it:v,link:{},todo:n?[]:Object.keys(v).sort().reverse(),path:($.path||[]).slice(),up:s}),s.node=O(s.node,B,i,A.link),!n&&A.todo.length&&$.push(A);var x=h.seen.length;(h.wait||(h.wait={}))[x]="",e=(A.ref=n?v:B?s.ref.get(B):s.ref)._,(e=v&&(v._||"")["#"]||e.soul||e.link)?T({soul:e}):A.ref.get(T,{run:h.run,v2020:1,out:{get:{".":" "}}})}if(!$.length)return h.ran(h);h.turn(p)}(),g):(k(h),g)};function m(o,_){if(!!_){_=(_._||"").id||_;var h=o.root.stun||(o.root.stun={on:a.on}),g={},y;o.stun||(o.stun=h.on("stun",function(){})),(y=h.on(""+_))&&y.the.last.next(g),!(g.run>=o.run)&&h.on(""+_,function(t){if(o.stun.end){this.off(),this.to.next(t);return}t.run=t.run||o.run,t.stun=t.stun||o.stun})}}function d(o){if(o.err){d.end(o.stun,o.root);return}if(!(o.todo.length||o.end||!Object.empty(o.wait))){o.end=1;var _=o.$.back(-1)._,h=_.root,g=_.ask(function(p){h.on("ack",p),p.err&&!p.lack&&a.log(p),++y>(o.acks||0)&&this.off(),o.ack&&o.ack(p,this)},o.opt),y=0,t=o.stun,i;(i=function(){!t||(d.end(t,h),setTimeout.each(Object.keys(t=t.add||""),function(p){(p=t[p])&&p()}))}).hatch=i,o.ack&&!o.ok&&(o.ok=o.acks||9),o.via._.on("out",{put:o.out=o.graph,ok:o.ok&&{"@":o.ok+1},opt:o.opt,"#":g,_:i})}}d.end=function(o,_){o.end=f,o.the.to===o&&o===o.the.last&&delete _.stun,o.off()},d.err=function(o,_){(o.ack||f).call(o,o.out={err:o.err=a.log(_)}),o.ran(o)};function k(o){var _=o.via._,h;o.via=o.via.back(function(g){if(g.soul||!g.get)return g.$;h=o.data,(o.data={})[g.get]=h}),(!o.via||!o.via._.soul)&&(o.via=_.root.$.get(((o.data||"")._||"")["#"]||_.$.back("opt.uuid")())),o.via.put(o.data,o.ack,o)}function b(o,_){return o&&(_=o.constructor)&&_.name||typeof o}var c,f=function(){},u=setTimeout.turn,j=a.valid,O=a.state.ify})(D,"./put"),D(function(E){var a=D("./root");D("./chain"),D("./back"),D("./put"),D("./get"),E.exports=a})(D,"./index"),D(function(E){var a=D("./index");a.chain.on=function(k,b,c,f){var u=this,j=u._;j.root;var O;if(typeof k=="string")return b?(O=j.on(k,b,c||j,f),c&&c.$&&(c.subs||(c.subs=[])).push(O),u):j.on(k);var o=b;return(o=o===!0?{change:!0}:o||{}).not=1,o.on=1,u.get(k,o),u},a.chain.once=function(k,b){if(b=b||{},!k)return m(this);var c=this,f=c._,u=f.root;f.put;var j=String.random(7),O;return c.get(function(o,_,h,g){var y=this,t=y._,i=t.one||(t.one={});if(g.stun||i[j]==="")return;if((O=a.valid(o))===!0){p();return}if(typeof O=="string")return;clearTimeout((f.one||"")[j]),clearTimeout(i[j]),i[j]=setTimeout(p,b.wait||99);function p($){if(!t.has&&!t.soul&&(t={put:o,get:_}),d===(O=t.put)&&(O=((h.$$||"")._||"").put),typeof a.valid(O)=="string"&&(O=u.$.get(O)._.put,O===d&&!$)){i[j]=setTimeout(function(){p(1)},b.wait||99);return}g.stun||i[j]!==""&&(i[j]="",(f.soul||f.has)&&g.off(),k.call(y,O,t.get),clearTimeout(i[j]))}},{on:1}),c};function m(k,b,c){return a.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(c=k.chain())._.nix=k.once(function(f,u){c._.on("in",this._)}),c._.lex=k._.lex,c}a.chain.off=function(){var k=this,b=k._,c,f=b.back;if(!!f)return b.ack=0,(c=f.next)&&c[b.get]&&delete c[b.get],(c=f.ask)&&delete c[b.get],(c=f.put)&&delete c[b.get],(c=b.soul)&&delete f.root.graph[c],(c=b.map)&&Object.keys(c).forEach(function(u,j){j=c[u],j.link&&f.root.$.get(j.link).off()}),(c=b.next)&&Object.keys(c).forEach(function(u,j){j=c[u],j.$.off()}),b.on("off",{}),k};var d})(D,"./on"),D(function(E){var a=D("./index"),m=a.chain.get.next;a.chain.get.next=function(c,f){var u;return Object.plain(f)?(u=((u=f["#"])||"")["="]||u)?c.get(u):((u=c.chain()._).lex=f,c.on("in",function(j){String.match(j.get||(j.put||"")["."],f["."]||f["#"]||f)&&u.on("in",j),this.to.next(j)}),u.$):(m||k)(c,f)},a.chain.map=function(c,f,u){var j=this,O=j._,o,_;return Object.plain(c)&&(o=c["."]?c:{".":c},c=b),c?(a.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),_=j.chain(),j.map().on(function(h,g,y,t){var i=(c||k).call(this,h,g,y,t);if(b!==i){if(h===i)return _._.on("in",y);if(a.is(i))return _._.on("in",i._);var p={};Object.keys(y.put).forEach(function($){p[$]=y.put[$]},p),p["="]=i,_._.on("in",{get:g,put:p})}}),_):((_=O.each)||((O.each=_=j.chain())._.lex=o||_._.lex||O.lex,_._.nix=j.back("nix"),j.on("in",d,_._)),_)};function d(c){this.to.next(c);var f=this.as,u=c.$,j=u._,O=c.put,o;!j.soul&&!c.$$||(o=f.lex)&&!String.match(c.get||(O||"")["."],o["."]||o["#"]||o)||a.on.link(c,f)}var k=function(){},b})(D,"./map"),D(function(E){var a=D("./index");a.chain.set=function(m,d,k){var b=this,c=b.back(-1),f,u;return d=d||function(){},k=k||{},k.item=k.item||m,(f=((m||"")._||"")["#"])&&((m={})["#"]=f),typeof(u=a.valid(m))=="string"?b.get(f=u).put(m,d,k):a.is(m)?(b.put(function(j){m.get(function(O,o,_){if(!O)return d.call(b,{err:a.log('Only a node can be linked! Not "'+_.put+'"!')});(u={})[O]={"#":O},j(u)},!0)}),m):(Object.plain(m)&&(m=c.get(f=b.back("opt.uuid")()).put(m)),b.get(f||c.back("opt.uuid")(7)).put(m,d,k))}})(D,"./set"),D(function(E){D("./shim");var a=function(){},m=JSON.parseAsync||function(c,f,u){var j,O=+new Date;try{f(j,JSON.parse(c,u),d.sucks(+new Date-O))}catch(o){f(o)}},d=JSON.stringifyAsync||function(c,f,u,j){var O,o=+new Date;try{f(O,JSON.stringify(c,u,j),d.sucks(+new Date-o))}catch(_){f(_)}};d.sucks=function(c){c>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),d.sucks=a)};function k(c){var f=function(){},u=c.opt||{};u.log=u.log||console.log,u.gap=u.gap||u.wait||0,u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.pack=u.pack||u.max*.01*.01,u.puff=u.puff||9;var j=setTimeout.turn||setTimeout,O=c.dup,o=O.check,_=O.track,h=f.hear=function(t,i){if(!!t){if(u.max<=t.length)return f.say({dam:"!",err:"Message too big!"},i);f===this&&(h.d+=t.length||0,++h.c);var p=i.SH=+new Date,$=t[0],s;if($==="["){m(t,function(v,S){if(v||!S)return f.say({dam:"!",err:"DAM JSON parse error."},i);console.STAT&&console.STAT(+new Date,S.length,"# on hear batch");var B=u.puff;(function A(){for(var e=+new Date,n=0,r;n<B&&(r=S[n++]);)f.hear(r,i);S=S.slice(n),console.STAT&&console.STAT(e,+new Date-e,"hear loop"),g(i),S.length&&j(A,0)})()}),t="";return}if($==="{"||(t["#"]||Object.plain(t))&&(s=t)){if(s)return h.one(s,i,p);m(t,function(v,S){if(v||!S)return f.say({dam:"!",err:"DAM JSON parse error."},i);h.one(S,i,p)});return}}};h.one=function(t,i,A){var $,s,v,S,B;if(t.DBG&&(t.DBG=B={DBG:t.DBG}),B&&(B.h=A),B&&(B.hp=+new Date),($=t["#"])||($=t["#"]=String.random(9)),!(v=o($))&&(s=t["##"],!(s&&(v=t["@"]||t.get&&$)&&O.check(S=v+s)))){if((t._=function(){}).via=f.leap=i,(v=t["><"])&&typeof v=="string"&&v.slice(0,99).split(",").forEach(function(e){this[e]=1},t._.yo={}),v=t.dam){(v=f.hear[v])&&v(t,i,c),_($);return}(v=t.ok)&&(t._.near=v["/"]);var A=+new Date;B&&(B.is=A),i.SI=$,c.on("in",f.last=t),B&&(B.hd=+new Date),console.STAT&&console.STAT(A,+new Date-A,t.get?"msg get":t.put?"msg put":"msg"),(v=_($)).via=i,t.get&&(v.it=t),S&&_(S),f.leap=f.last=null}},h.c=h.d=0,function(){var t=0,i;f.hash=function(s,v){var S,B,A,e=+new Date;d(s.put,function n(r,l){var x=(B||(B=A=l||"")).slice(0,32768);if(S=String.hash(x,S),B=B.slice(32768),B){j(n,0);return}console.STAT&&console.STAT(e,+new Date-e,"say json+hash"),s._.$put=A,s["##"]=S,f.say(s,v),delete s._.$put},p)};function p(s,v){var S;return v instanceof Object?(Object.keys(v).sort().forEach($,{to:S={},on:v}),S):v}function $(s){this.to[s]=this.on[s]}f.say=function(s,v){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(s),!s)return!1;var B,A,e=s["@"],n=s._||(s._=function(){}),r=s.DBG,l=+new Date;if(n.y=n.y||l,v||r&&(r.y=l),(B=s["#"])||(B=s["#"]=String.random(9)),!i&&_(B),!s["##"]&&b!==s.put&&!n.via&&e){f.hash(s,v);return}if(!v&&e&&(v=(S=O.s[e])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=f.last)&&e===S["#"]&&f.leap),!v&&e)return O.s[e]?void 0:(console.STAT&&console.STAT(+new Date,++t,"total no peer to ack to"),!1);if(!v&&f.way)return f.way(s);if(r&&(r.yh=+new Date),!(A=n.raw)){f.raw(s,v);return}if(r&&(r.yr=+new Date),!v||!v.id){if(!Object.plain(v||u.peers))return!1;var l=+new Date;u.puff;var x=u.peers,T=Object.keys(v||u.peers||{});console.STAT&&console.STAT(l,+new Date-l,"peer keys"),function I(){var J=+new Date;i=1;var M=n.raw;n.raw=A;for(var C=0,W;C<9&&(W=(T||"")[C++]);)!(W=x[W]||(v||"")[W])||f.say(s,W);n.raw=M,i=0,T=T.slice(C),console.STAT&&console.STAT(J,+new Date-J,"say loop"),T.length&&(j(I,0),e&&_(e))}();return}if(!v.wire&&f.wire&&f.wire(v),B!==v.last){if(v.last=B,v===n.via||(S=n.yo)&&(S[v.url]||S[v.pid]||S[v.id]))return!1;if(console.STAT&&console.STAT(l,((r||n).yp=+new Date)-(n.y||l),"say prep"),!i&&e&&_(e),v.batch){if(v.tail=(S=v.tail||0)+A.length,v.tail<=u.pack){v.batch+=(S?",":"")+A;return}g(v)}v.batch="[";var w=+new Date;setTimeout(function(){console.STAT&&console.STAT(w,+new Date-w,"0ms TO"),g(v)},u.gap),y(A,v),console.STAT&&e===v.SI&&console.STAT(l,+new Date-v.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(s,v){if(!s)return"";var S=s._||{},B,A;if(A=S.raw)return A;if(typeof s=="string")return s;var e=s["##"],n=s["@"];if(e&&n){if(!S.via&&o(n+e))return!1;if((A=(O.s[n]||"").it)||(A=f.last)&&n===A["#"]){if(e===A["##"])return!1;A["##"]||(A["##"]=e)}}if(!s.dam&&!s["@"]){var r=0,l=[];A=u.peers;for(var x in A){var T=A[x];if(l.push(T.url||T.pid||T.id),++r>6)break}r>1&&(s["><"]=l.join())}if(s.put&&(A=s.ok)&&(s.ok={"@":(A["@"]||1)-1,"/":A["/"]==s._.near?f.near:A["/"]}),B=S.$put){A={},Object.keys(s).forEach(function(G){A[G]=s[G]}),A.put=":])([:",d(A,function(G,I){if(!G){var J=+new Date;A=I.indexOf('"put":":])([:"'),w(b,I=I.slice(0,A+6)+B+I.slice(A+14)),console.STAT&&console.STAT(J,+new Date-J,"say slice")}});return}d(s,w);function w(G,I){G||(S.raw=I,f.say(s,v))}}}();function g(t){var i=t.batch,p=typeof i=="string";if(p&&(i+="]"),t.batch=t.tail=null,!!i&&!(p?3>i.length:!i.length)){if(!p)try{i=i.length===1?i[0]:JSON.stringify(i)}catch($){return u.log("DAM JSON stringify error",$)}!i||y(i,t)}}function y(t,i){try{var p=i.wire;i.say?i.say(t):p.send&&p.send(t),f.say.d+=t.length||0,++f.say.c}catch{(i.queue=i.queue||[]).push(t)}}return f.near=0,f.hi=function(t){var i=t.wire,p;if(!i){f.wire(t.length&&{url:t,id:t}||t);return}t.id?u.peers[t.url||t.id]=t:(p=t.id=t.id||t.url||String.random(9),f.say({dam:"?",pid:c.opt.pid},u.peers[p]=t),delete O.s[t.last]),t.met||(f.near++,t.met=+new Date,c.on("hi",t)),p=t.queue,t.queue=[],setTimeout.each(p||[],function($){y($,t)},0,9)},f.bye=function(t){t.met&&--f.near,delete t.met,c.on("bye",t);var i=+new Date;i=i-(t.met||i),f.bye.time=((f.bye.time||i)+i)/2},f.hear["!"]=function(t,i){u.log("Error:",t.err)},f.hear["?"]=function(t,i){t.pid&&(i.pid||(i.pid=t.pid),t["@"])||(f.say({dam:"?",pid:u.pid,"@":t["#"]},i),delete O.s[i.last])},f.hear.mob=function(t,i){if(!!t.peers){var p=Object.keys(t.peers),$=p[Math.random()*p.length>>0];!$||(f.bye(i),f.hi($))}},c.on("create",function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",f.say)}),c.on("bye",function(t,i){t=u.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(i=t.wire)&&i.close&&i.close(),delete u.peers[t.id],t.wire=null}),c.on("bye",function(t,i){this.to.next(t),(i=console.STAT)&&(i.peers=f.near),(i=t.url)&&setTimeout(function(){},u.lack||9e3)}),c.on("hi",function(t,i){if(this.to.next(t),(i=console.STAT)&&(i.peers=f.near),!u.super){var p=Object.keys(c.next||"");p.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(p,function($){var s=c.next[$];if(u.super||(s.ask||"")[""]){f.say({get:{"#":$}},t);return}setTimeout.each(Object.keys(s.ask||""),function(v){!v||f.say({"##":String.hash((c.graph[$]||"")[v]),get:{"#":$,".":v}},t)})})}}),f}var b;try{E.exports=k}catch{}})(D,"./mesh"),D(function(E){var a=D("./index");a.Mesh=D("./mesh"),a.on("opt",function(d){if(this.to.next(d),d.once)return;var k=d.opt;if(k.WebSocket===!1)return;var b=a.window||{},c=k.WebSocket||b.WebSocket||b.webkitWebSocket||b.mozWebSocket;if(!c)return;k.WebSocket=c;var f=k.mesh=k.mesh||a.Mesh(d);f.wire||k.wire,f.wire=k.wire=u;function u(_){try{if(!_||!_.url)return g&&g(_);var h=_.url.replace(/^http/,"ws"),g=_.wire=new k.WebSocket(h);return g.onclose=function(){O(_),k.mesh.bye(_)},g.onerror=function(y){O(_)},g.onopen=function(){k.mesh.hi(_)},g.onmessage=function(y){!y||k.mesh.hear(y.data||y,_)},g}catch{k.mesh.bye(_)}}setTimeout(function(){!k.super&&d.on("out",{dam:"hi"})},1);var j=2*999;function O(_){clearTimeout(_.defer),k.peers[_.url]&&(o&&_.retry<=0||(_.retry=(_.retry||k.retry+1||60)-(-_.tried+(_.tried=+new Date)<j*4?1:0),_.defer=setTimeout(function h(){if(o&&o.hidden)return setTimeout(h,j);u(_)},j)))}var o=""+m!=typeof document&&document});var m})(D,"./websocket"),D(function(E){if(!(typeof Gun>"u")){var a=function(){},m;try{m=(Gun.window||a).localStorage}catch{}m||(Gun.log("Warning: No localStorage exists to persist data to!"),m={setItem:function(k,b){this[k]=b},removeItem:function(k){delete this[k]},getItem:function(k){return this[k]}});var d=JSON.stringifyAsync||function(k,b,c,f){var u;try{b(u,JSON.stringify(k,c,f))}catch(j){b(j)}};Gun.on("create",function k(b){this.to.next(b);var c=b.opt;b.graph;var f=[],u,j,O,o;if(c.localStorage===!1)return;c.prefix=c.file||"gun/";try{u=k[c.prefix]=k[c.prefix]||JSON.parse(O=m.getItem(c.prefix))||{}}catch{u=k[c.prefix]={}}O=(O||"").length,b.on("get",function(h){this.to.next(h);var g=h.get,y,t,i,p;!g||!(y=g["#"])||(t=u[y]||p,t&&(i=g["."])&&!Object.plain(i)&&(t=Gun.state.ify({},i,Gun.state.is(t,i),t[i],y)),Gun.on.get.ack(h,t))}),b.on("put",function(h){this.to.next(h);var g=h.put,y=g["#"],t=g["."],i=h["#"],p=h.ok||"";if(u[y]=Gun.state.ify(u[y],t,g[">"],g[":"],y),o&&O>4999880){b.on("in",{"@":i,err:"localStorage max!"});return}!h["@"]&&(!h._.via||Math.random()<p["@"]/p["/"])&&f.push(i),!j&&(j=setTimeout(_,9+O/333))});function _(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(_,99);return}var h=f;clearTimeout(j),j=!1,f=[],d(u,function(g,y){try{!g&&m.setItem(c.prefix,y)}catch(t){g=o=t||"localStorage failure"}g&&(Gun.log(g+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),b.on("localStorage:error",{err:g,get:c.prefix,put:u})),O=y.length,setTimeout.each(h,function(t){b.on("in",{"@":t,err:g,ok:0})},0,99)})}})}})(D,"./localStorage")})(),function(){var A;if(""+A!=typeof Gun){var D=function(e){console.warn("Warning! Deprecated internal utility will break in next version:",e)},N=Gun;N.fn=N.fn||{is:function(e){return D("fn"),!!e&&typeof e=="function"}},N.bi=N.bi||{is:function(e){return D("bi"),e instanceof Boolean||typeof e=="boolean"}},N.num=N.num||{is:function(e){return D("num"),!E(e)&&(e-parseFloat(e)+1>=0||e===1/0||e===-1/0)}},N.text=N.text||{is:function(e){return D("text"),typeof e=="string"}},N.text.ify=N.text.ify||function(e){return D("text.ify"),N.text.is(e)?e:typeof JSON<"u"?JSON.stringify(e):e&&e.toString?e.toString():e},N.text.random=N.text.random||function(e,n){D("text.random");var r="";for(e=e||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";e>0;)r+=n.charAt(Math.floor(Math.random()*n.length)),e--;return r},N.text.match=N.text.match||function(e,n){var r,l;return D("text.match"),typeof e!="string"?!1:(typeof n=="string"&&(n={"=":n}),n=n||{},r=n["="]||n["*"]||n[">"]||n["<"],e===r?!0:l!==n["="]?!1:(r=n["*"]||n[">"]||n["<"],e.slice(0,(r||"").length)===r?!0:l!==n["*"]?!1:l!==n[">"]&&l!==n["<"]?e>=n[">"]&&e<=n["<"]:l!==n[">"]&&e>=n[">"]||l!==n["<"]&&e<=n["<"]))},N.text.hash=N.text.hash||function(e,n){if(D("text.hash"),typeof e=="string"){if(n=n||0,!e.length)return n;for(var r=0,l=e.length,x;r<l;++r)x=e.charCodeAt(r),n=(n<<5)-n+x,n|=0;return n}},N.list=N.list||{is:function(e){return D("list"),e instanceof Array}},N.list.slit=N.list.slit||Array.prototype.slice,N.list.sort=N.list.sort||function(e){return D("list.sort"),function(n,r){return!n||!r?0:(n=n[e],r=r[e],n<r?-1:n>r?1:0)}},N.list.map=N.list.map||function(e,n,r){return D("list.map"),S(e,n,r)},N.list.index=1,N.obj=N.boj||{is:function(e){return D("obj"),e?e instanceof Object&&e.constructor===Object||Object.prototype.toString.call(e).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},N.obj.put=N.obj.put||function(e,n,r){return D("obj.put"),(e||{})[n]=r,e},N.obj.has=N.obj.has||function(e,n){return D("obj.has"),e&&Object.prototype.hasOwnProperty.call(e,n)},N.obj.del=N.obj.del||function(e,n){if(D("obj.del"),!!e)return e[n]=null,delete e[n],e},N.obj.as=N.obj.as||function(e,n,r,l){return D("obj.as"),e[n]=e[n]||(l===r?{}:r)},N.obj.ify=N.obj.ify||function(e){if(D("obj.ify"),i(e))return e;try{e=JSON.parse(e)}catch{e={}}return e},function(){var e;function n(r,l){$(this,l)&&e!==this[l]||(this[l]=r)}N.obj.to=N.obj.to||function(r,l){return D("obj.to"),l=l||{},S(r,n,l),l}}(),N.obj.copy=N.obj.copy||function(e){return D("obj.copy"),e&&JSON.parse(JSON.stringify(e))},function(){function e(n,r){var l=this.n,x;if(!(l&&(r===l||i(l)&&$(l,r)))&&x!==r)return!0}N.obj.empty=N.obj.empty||function(n,r){return D("obj.empty"),n?!S(n,e,{n:r}):!0}}(),function(){function e(l,x){if(arguments.length===2){e.r=e.r||{},e.r[l]=x;return}e.r=e.r||[],e.r.push(l)}var n=Object.keys,r;Object.keys=Object.keys||function(l){return r(l,function(x,T,w){w(T)})},N.obj.map=r=N.obj.map||function(l,x,T){D("obj.map");var w,G=0,I,J,M,C,W=typeof x=="function";if(e.r=w,n&&i(l)&&(M=n(l),C=!0),T=T||{},E(l)||M)for(I=(M||l).length;G<I;G++){var q=G+N.list.index;if(W){if(J=C?x.call(T,l[M[G]],M[G],e):x.call(T,l[G],q,e),J!==w)return J}else if(x===l[C?M[G]:G])return M?M[G]:q}else for(G in l)if(W){if($(l,G)&&(J=T?x.call(T,l[G],G,e):x(l[G],G,e),J!==w))return J}else if(x===l[G])return G;return W?e.r:N.list.index?0:-1}}(),N.time=N.time||{},N.time.is=N.time.is||function(e){return D("time"),e?e instanceof Date:+new Date().getTime()};var y=N.fn.is,E=N.list.is,t=N.obj,i=t.is,$=t.has,S=t.map,a={};a.is=function(e){return D("val.is"),e===A?!1:e===null?!0:e===1/0?!1:k(e)||d(e)||o(e)?!0:a.link.is(e)||!1},a.link=a.rel={_:"#"},function(){a.link.is=function(n){if(D("val.link.is"),n&&n[m]&&!n._&&i(n)){var r={};if(S(n,e,r),r.id)return r.id}return!1};function e(n,r){var l=this;if(l.id)return l.id=!1;if(r==m&&k(n))l.id=n;else return l.id=!1}}(),a.link.ify=function(e){return D("val.link.ify"),v({},m,e)},N.obj.has._=".";var m=a.link._,A,d=N.bi.is,o=N.num.is,k=N.text.is,t=N.obj,i=t.is,v=t.put,S=t.map;N.val=N.val||a;var b={_:"_"};b.soul=function(e,n){return D("node.soul"),e&&e._&&e._[n||u]},b.soul.ify=function(e,n){return D("node.soul.ify"),n=typeof n=="string"?{soul:n}:n||{},e=e||{},e._=e._||{},e._[u]=n.soul||e._[u]||f(),e},b.soul._=a.link._,function(){b.is=function(n,r,l){D("node.is");var x;return i(n)&&(x=b.soul(n))?!S(n,e,{as:l,cb:r,s:x,n}):!1};function e(n,r){if(r!==b._){if(!a.is(n))return!0;this.cb&&this.cb.call(this.as,n,r,this.n,this.s)}}}(),function(){b.ify=function(n,r,l){return D("node.ify"),r?typeof r=="string"?r={soul:r}:typeof r=="function"&&(r={map:r}):r={},r.map&&(r.node=r.map.call(l,n,A,r.node||{})),(r.node=b.soul.ify(r.node||{},r))&&S(n,e,{o:r,as:l}),r.node};function e(n,r){var l=this.o,x,T;if(l.map){x=l.map.call(this.as,n,""+r,l.node),T===x?p(l.node,r):l.node&&(l.node[r]=x);return}a.is(n)&&(l.node[r]=n)}}();var t=N.obj,i=t.is,p=t.del,S=t.map,c=N.text,f=c.random,u=b.soul._,A;N.node=N.node||b;var j=N.state;j.lex=function(){return D("state.lex"),j().toString(36).replace(".","")},j.to=function(e,n,r){D("state.to");var l=(e||{})[n];return i(l)&&(l=B(l)),j.ify(r,n,j.is(e,n),l,b.soul(e))},function(){j.map=function(n,r,l){D("state.map");var x,T=i(T=n||r)?T:null;return n=y(n=n||r)?n:null,T&&!n?(r=o(r)?r:j(),T[h]=T[h]||{},S(T,e,{o:T,s:r}),T):(l=l||i(r)?r:x,r=o(r)?r:j(),function(w,G,I,J){if(!n)return e.call({o:I,s:r},w,G),w;n.call(l||this||{},w,G,I,J),!($(I,G)&&x===I[G])&&e.call({o:I,s:r},w,G)})};function e(n,r){h!==r&&j.ify(this.o,r,this.s)}}();var t=N.obj;t.as;var $=t.has,i=t.is,S=t.map,B=t.copy,O=N.num,o=O.is,_=N.fn,y=_.is,h=b._,A,g={};(function(){g.is=function(r,l,x,T){return D("graph.is"),!r||!i(r)||s(r)?!1:!S(r,e,{cb:l,fn:x,as:T})};function e(r,l){if(!r||l!==b.soul(r)||!b.is(r,this.fn,this.as))return!0;!this.cb||(n.n=r,n.as=this.as,this.cb.call(n.as,r,l,n))}function n(r){r&&b.is(n.n,r,n.as)}})(),function(){g.ify=function(T,w,G){D("graph.ify");var I={path:[],obj:T};return w?typeof w=="string"?w={soul:w}:typeof w=="function"&&(w.map=w):w={},typeof G=="string"&&(w.soul=w.soul||G,G=A),w.soul&&(I.link=a.link.ify(w.soul)),w.shell=(G||{}).shell,w.graph=w.graph||{},w.seen=w.seen||[],w.as=w.as||G,e(w,I),w.root=I.node,w.graph};function e(T,w){var G;return(G=x(T,w))?G:(w.env=T,w.soul=r,b.ify(w.obj,n,w)&&(w.link=w.link||a.link.ify(b.soul(w.node)),w.obj!==T.shell&&(T.graph[a.link.is(w.link)]=w.node)),w)}function n(T,w,G){var I=this,J=I.env,M,C;if(b._===w&&$(T,a.link._))return G._;if(!!(M=l(T,w,G,I,J))){if(w||(I.node=I.node||G||{},$(T,b._)&&b.soul(T)&&(I.node._=B(T._)),I.node=b.soul.ify(I.node,a.link.is(I.link)),I.link=I.link||a.link.ify(b.soul(I.node))),(C=J.map)&&(C.call(J.as||{},T,w,G,I),$(G,w))){if(T=G[w],A===T){p(G,w);return}if(!(M=l(T,w,G,I,J)))return}if(!w)return I.node;if(M===!0)return T;if(C=e(J,{obj:T,path:I.path.concat(w)}),!!C.node)return C.link}}function r(T){var w=this,G=a.link.is(w.link),I=w.env.graph;w.link=w.link||a.link.ify(T),w.link[a.link._]=T,w.node&&w.node[b._]&&(w.node[b._][a.link._]=T),$(I,G)&&(I[T]=I[G],p(I,G))}function l(T,w,G,I,J){var M;if(a.is(T))return!0;if(i(T))return 1;if(M=J.invalid)return T=M.call(J.as||{},T,w,G),l(T,w,G,I,J);J.err="Invalid value at '"+I.path.concat(w).join(".")+"'!",N.list.is(T)&&(J.err+=" Use `.set(item)` instead of an Array.")}function x(T,w){for(var G=T.seen,I=G.length,J;I--;)if(J=G[I],w.obj===J.obj)return J;G.push(w)}}(),g.node=function(e){D("graph.node");var n=b.soul(e);if(!!n)return v({},n,e)},function(){g.to=function(n,r,l){if(D("graph.to"),!!n){var x={};return l=l||{seen:{}},S(n[r],e,{obj:x,graph:n,opt:l}),x}};function e(n,r){var l,x;if(b._===r){if(s(n,a.link._))return;this.obj[r]=B(n);return}if(!(l=a.link.is(n))){this.obj[r]=n;return}if(x=this.opt.seen[l]){this.obj[r]=x;return}this.obj[r]=this.opt.seen[l]=g.to(this.graph,l,this.opt)}}();var y=N.fn.is,t=N.obj,i=t.is,p=t.del,$=t.has,s=t.empty,v=t.put,S=t.map,B=t.copy,A;N.graph=N.graph||g}}()})(Q);const L=Q.exports;export{L as G};
