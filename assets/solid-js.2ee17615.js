const H={};function te(e){H.context=e}const ne=(e,t)=>e===t,re=Symbol("solid-proxy"),se=Symbol("solid-track"),L={equals:ne};let Q=q;const m=1,U=2,W={owned:null,cleanups:null,context:null,owner:null};var a=null;let A=null,c=null,p=null,v=null,M=0;function D(e,t){const r=c,n=a,s=e.length===0,u=s?W:{owned:null,cleanups:null,context:null,owner:t||n},i=s?e:()=>e(()=>S(()=>V(u)));a=u,c=null;try{return k(i,!0)}finally{c=r,a=n}}function ue(e,t){t=t?Object.assign({},L,t):L;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=s=>(typeof s=="function"&&(s=s(r.value)),Y(r,s));return[X.bind(r),n]}function le(e,t,r){const n=$(e,t,!1,m);P(n)}function we(e,t,r){Q=fe;const n=$(e,t,!1,m);n.user=!0,v?v.push(n):P(n)}function R(e,t,r){r=r?Object.assign({},L,r):L;const n=$(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,P(n),X.bind(n)}function ye(e){return k(e,!1)}function S(e){let t,r=c;return c=null,t=e(),c=r,t}function ve(e,t,r){const n=Array.isArray(e);let s,u=r&&r.defer;return i=>{let o;if(n){o=Array(e.length);for(let h=0;h<e.length;h++)o[h]=e[h]()}else o=e();if(u){u=!1;return}const f=S(()=>t(o,s,i));return s=o,f}}function ie(e){return a===null||(a.cleanups===null?a.cleanups=[e]:a.cleanups.push(e)),e}function me(){return c}function de(e){const t=Symbol("context");return{id:t,Provider:pe(t),defaultValue:e}}function Ae(e){let t;return(t=Z(a,e.id))!==void 0?t:e.defaultValue}function oe(e){const t=R(e),r=R(()=>K(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function X(){const e=A;if(this.sources&&(this.state||e))if(this.state===m||e)P(this);else{const t=p;p=null,k(()=>N(this),!1),p=t}if(c){const t=this.observers?this.observers.length:0;c.sources?(c.sources.push(this),c.sourceSlots.push(t)):(c.sources=[this],c.sourceSlots=[t]),this.observers?(this.observers.push(c),this.observerSlots.push(c.sources.length-1)):(this.observers=[c],this.observerSlots=[c.sources.length-1])}return this.value}function Y(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&k(()=>{for(let s=0;s<e.observers.length;s+=1){const u=e.observers[s],i=A&&A.running;i&&A.disposed.has(u),(i&&!u.tState||!i&&!u.state)&&(u.pure?p.push(u):v.push(u),u.observers&&z(u)),i||(u.state=m)}if(p.length>1e6)throw p=[],new Error},!1)),t}function P(e){if(!e.fn)return;V(e);const t=a,r=c,n=M;c=a=e,ce(e,e.value,n),c=r,a=t}function ce(e,t,r){let n;try{n=e.fn(t)}catch(s){e.pure&&(e.state=m),J(s)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Y(e,n):e.value=n,e.updatedAt=r)}function $(e,t,r,n=m,s){const u={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:a,context:null,pure:r};return a===null||a!==W&&(a.owned?a.owned.push(u):a.owned=[u]),u}function I(e){const t=A;if(e.state===0||t)return;if(e.state===U||t)return N(e);if(e.suspense&&S(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<M);)(e.state||t)&&r.push(e);for(let n=r.length-1;n>=0;n--)if(e=r[n],e.state===m||t)P(e);else if(e.state===U||t){const s=p;p=null,k(()=>N(e,r[0]),!1),p=s}}function k(e,t){if(p)return e();let r=!1;t||(p=[]),v?r=!0:v=[],M++;try{const n=e();return ae(r),n}catch(n){p||(v=null),J(n)}}function ae(e){if(p&&(q(p),p=null),e)return;const t=v;v=null,t.length&&k(()=>Q(t),!1)}function q(e){for(let t=0;t<e.length;t++)I(e[t])}function fe(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:I(n)}for(H.context&&te(),t=0;t<r;t++)I(e[t])}function N(e,t){const r=A;e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];s.sources&&(s.state===m||r?s!==t&&I(s):(s.state===U||r)&&N(s,t))}}function z(e){const t=A;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(!n.state||t)&&(n.state=U,n.pure?p.push(n):v.push(n),n.observers&&z(n))}}function V(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),s=r.observers;if(s&&s.length){const u=s.pop(),i=r.observerSlots.pop();n<s.length&&(u.sourceSlots[i]=n,s[n]=u,r.observerSlots[n]=i)}}if(e.owned){for(t=0;t<e.owned.length;t++)V(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function he(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function J(e){throw e=he(e),e}function Z(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Z(e.owner,t):void 0}function K(e){if(typeof e=="function"&&!e.length)return K(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=K(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function pe(e){return function(r){let n;return le(()=>n=S(()=>(a.context={[e]:r.value},oe(()=>r.children)))),n}}const ge=Symbol("fallback");function G(e){for(let t=0;t<e.length;t++)e[t]()}function be(e,t,r={}){let n=[],s=[],u=[],i=0,o=t.length>1?[]:null;return ie(()=>G(u)),()=>{let f=e()||[],h,l;return f[se],S(()=>{let g=f.length,d,E,C,O,T,b,w,y,x;if(g===0)i!==0&&(G(u),u=[],n=[],s=[],i=0,o&&(o=[])),r.fallback&&(n=[ge],s[0]=D(ee=>(u[0]=ee,r.fallback())),i=1);else if(i===0){for(s=new Array(g),l=0;l<g;l++)n[l]=f[l],s[l]=D(B);i=g}else{for(C=new Array(g),O=new Array(g),o&&(T=new Array(g)),b=0,w=Math.min(i,g);b<w&&n[b]===f[b];b++);for(w=i-1,y=g-1;w>=b&&y>=b&&n[w]===f[y];w--,y--)C[y]=s[w],O[y]=u[w],o&&(T[y]=o[w]);for(d=new Map,E=new Array(y+1),l=y;l>=b;l--)x=f[l],h=d.get(x),E[l]=h===void 0?-1:h,d.set(x,l);for(h=b;h<=w;h++)x=n[h],l=d.get(x),l!==void 0&&l!==-1?(C[l]=s[h],O[l]=u[h],o&&(T[l]=o[h]),l=E[l],d.set(x,l)):u[h]();for(l=b;l<g;l++)l in C?(s[l]=C[l],u[l]=O[l],o&&(o[l]=T[l],o[l](l))):s[l]=D(B);s=s.slice(0,i=g),n=f.slice(0)}return s});function B(g){if(u[l]=g,o){const[d,E]=ue(l);return o[l]=E,t(f[l],d)}return t(f[l])}}}function xe(e,t){return S(()=>e(t||{}))}function j(){return!0}const _={get(e,t,r){return t===re?r:e.get(t)},has(e,t){return e.has(t)},set:j,deleteProperty:j,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:j,deleteProperty:j}},ownKeys(e){return e.keys()}};function F(e){return(e=typeof e=="function"?e():e)==null?{}:e}function Se(...e){return new Proxy({get(t){for(let r=e.length-1;r>=0;r--){const n=F(e[r])[t];if(n!==void 0)return n}},has(t){for(let r=e.length-1;r>=0;r--)if(t in F(e[r]))return!0;return!1},keys(){const t=[];for(let r=0;r<e.length;r++)t.push(...Object.keys(F(e[r])));return[...new Set(t)]}},_)}function ke(e,...t){const r=new Set(t.flat()),n=Object.getOwnPropertyDescriptors(e),s=t.map(u=>{const i={};for(let o=0;o<u.length;o++){const f=u[o];Object.defineProperty(i,f,n[f]?n[f]:{get(){return e[f]},set(){return!0}})}return i});return s.push(new Proxy({get(u){return r.has(u)?void 0:e[u]},has(u){return r.has(u)?!1:u in e},keys(){return Object.keys(e).filter(u=>!r.has(u))}},_)),s}function Ee(e){const t="fallback"in e&&{fallback:()=>e.fallback};return R(be(()=>e.each,e.children,t||void 0))}export{re as $,Ee as F,le as a,R as b,D as c,ke as d,se as e,ye as f,me as g,ue as h,xe as i,de as j,Ae as k,we as l,Se as m,ve as n,ie as o,H as s,S as u};
