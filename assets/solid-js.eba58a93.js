const M={};function ne(e){M.context=e}const re=(e,t)=>e===t,se=Symbol("solid-proxy"),ue=Symbol("solid-track"),I={equals:re};let H=z;const v=1,L=2,Q={owned:null,cleanups:null,context:null,owner:null};var h=null;let x=null,f=null,p=null,b=null,R=0;function $(e,t){const r=f,n=h,u=e.length===0,s=u?Q:{owned:null,cleanups:null,context:null,owner:t||n},l=u?e:()=>e(()=>m(()=>V(s)));h=s,f=null;try{return E(l,!0)}finally{f=r,h=n}}function le(e,t){t=t?Object.assign({},I,t):I;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=u=>(typeof u=="function"&&(u=u(r.value)),Y(r,u));return[X.bind(r),n]}function ie(e,t,r){const n=K(e,t,!1,v);O(n)}function we(e,t,r){H=ae;const n=K(e,t,!1,v);n.user=!0,b?b.push(n):O(n)}function S(e,t,r){r=r?Object.assign({},I,r):I;const n=K(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,O(n),X.bind(n)}function be(e){return E(e,!1)}function m(e){let t,r=f;return f=null,t=e(),f=r,t}function ve(e,t,r){const n=Array.isArray(e);let u,s=r&&r.defer;return l=>{let o;if(n){o=Array(e.length);for(let a=0;a<e.length;a++)o[a]=e[a]()}else o=e();if(s){s=!1;return}const c=m(()=>t(o,u,l));return u=o,c}}function oe(e){return h===null||(h.cleanups===null?h.cleanups=[e]:h.cleanups.push(e)),e}function me(){return f}function Ae(e){const t=Symbol("context");return{id:t,Provider:pe(t),defaultValue:e}}function xe(e){let t;return(t=_(h,e.id))!==void 0?t:e.defaultValue}function W(e){const t=S(e),r=S(()=>F(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function X(){const e=x;if(this.sources&&(this.state||e))if(this.state===v||e)O(this);else{const t=p;p=null,E(()=>N(this),!1),p=t}if(f){const t=this.observers?this.observers.length:0;f.sources?(f.sources.push(this),f.sourceSlots.push(t)):(f.sources=[this],f.sourceSlots=[t]),this.observers?(this.observers.push(f),this.observerSlots.push(f.sources.length-1)):(this.observers=[f],this.observerSlots=[f.sources.length-1])}return this.value}function Y(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&E(()=>{for(let u=0;u<e.observers.length;u+=1){const s=e.observers[u],l=x&&x.running;l&&x.disposed.has(s),(l&&!s.tState||!l&&!s.state)&&(s.pure?p.push(s):b.push(s),s.observers&&J(s)),l||(s.state=v)}if(p.length>1e6)throw p=[],new Error},!1)),t}function O(e){if(!e.fn)return;V(e);const t=h,r=f,n=R;f=h=e,ce(e,e.value,n),f=r,h=t}function ce(e,t,r){let n;try{n=e.fn(t)}catch(u){e.pure&&(e.state=v),Z(u)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Y(e,n):e.value=n,e.updatedAt=r)}function K(e,t,r,n=v,u){const s={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:h,context:null,pure:r};return h===null||h!==Q&&(h.owned?h.owned.push(s):h.owned=[s]),s}function q(e){const t=x;if(e.state===0||t)return;if(e.state===L||t)return N(e);if(e.suspense&&m(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<R);)(e.state||t)&&r.push(e);for(let n=r.length-1;n>=0;n--)if(e=r[n],e.state===v||t)O(e);else if(e.state===L||t){const u=p;p=null,E(()=>N(e,r[0]),!1),p=u}}function E(e,t){if(p)return e();let r=!1;t||(p=[]),b?r=!0:b=[],R++;try{const n=e();return fe(r),n}catch(n){p||(b=null),Z(n)}}function fe(e){if(p&&(z(p),p=null),e)return;const t=b;b=null,t.length&&E(()=>H(t),!1)}function z(e){for(let t=0;t<e.length;t++)q(e[t])}function ae(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:q(n)}for(M.context&&ne(),t=0;t<r;t++)q(e[t])}function N(e,t){const r=x;e.state=0;for(let n=0;n<e.sources.length;n+=1){const u=e.sources[n];u.sources&&(u.state===v||r?u!==t&&q(u):(u.state===L||r)&&N(u,t))}}function J(e){const t=x;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(!n.state||t)&&(n.state=L,n.pure?p.push(n):b.push(n),n.observers&&J(n))}}function V(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),u=r.observers;if(u&&u.length){const s=u.pop(),l=r.observerSlots.pop();n<u.length&&(s.sourceSlots[l]=n,u[n]=s,r.observerSlots[n]=l)}}if(e.owned){for(t=0;t<e.owned.length;t++)V(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function he(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Z(e){throw e=he(e),e}function _(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:_(e.owner,t):void 0}function F(e){if(typeof e=="function"&&!e.length)return F(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=F(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function pe(e){return function(r){let n;return ie(()=>n=m(()=>(h.context={[e]:r.value},W(()=>r.children)))),n}}const ge=Symbol("fallback");function G(e){for(let t=0;t<e.length;t++)e[t]()}function de(e,t,r={}){let n=[],u=[],s=[],l=0,o=t.length>1?[]:null;return oe(()=>G(s)),()=>{let c=e()||[],a,i;return c[ue],m(()=>{let g=c.length,A,C,P,T,j,d,y,w,k;if(g===0)l!==0&&(G(s),s=[],n=[],u=[],l=0,o&&(o=[])),r.fallback&&(n=[ge],u[0]=$(te=>(s[0]=te,r.fallback())),l=1);else if(l===0){for(u=new Array(g),i=0;i<g;i++)n[i]=c[i],u[i]=$(B);l=g}else{for(P=new Array(g),T=new Array(g),o&&(j=new Array(g)),d=0,y=Math.min(l,g);d<y&&n[d]===c[d];d++);for(y=l-1,w=g-1;y>=d&&w>=d&&n[y]===c[w];y--,w--)P[w]=u[y],T[w]=s[y],o&&(j[w]=o[y]);for(A=new Map,C=new Array(w+1),i=w;i>=d;i--)k=c[i],a=A.get(k),C[i]=a===void 0?-1:a,A.set(k,i);for(a=d;a<=y;a++)k=n[a],i=A.get(k),i!==void 0&&i!==-1?(P[i]=u[a],T[i]=s[a],o&&(j[i]=o[a]),i=C[i],A.set(k,i)):s[a]();for(i=d;i<g;i++)i in P?(u[i]=P[i],s[i]=T[i],o&&(o[i]=j[i],o[i](i))):u[i]=$(B);u=u.slice(0,l=g),n=c.slice(0)}return u});function B(g){if(s[i]=g,o){const[A,C]=le(i);return o[i]=C,t(c[i],A)}return t(c[i])}}}function Se(e,t){return m(()=>e(t||{}))}function U(){return!0}const ee={get(e,t,r){return t===se?r:e.get(t)},has(e,t){return e.has(t)},set:U,deleteProperty:U,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:U,deleteProperty:U}},ownKeys(e){return e.keys()}};function D(e){return(e=typeof e=="function"?e():e)==null?{}:e}function ke(...e){return new Proxy({get(t){for(let r=e.length-1;r>=0;r--){const n=D(e[r])[t];if(n!==void 0)return n}},has(t){for(let r=e.length-1;r>=0;r--)if(t in D(e[r]))return!0;return!1},keys(){const t=[];for(let r=0;r<e.length;r++)t.push(...Object.keys(D(e[r])));return[...new Set(t)]}},ee)}function Ee(e,...t){const r=new Set(t.flat()),n=Object.getOwnPropertyDescriptors(e),u=t.map(s=>{const l={};for(let o=0;o<s.length;o++){const c=s[o];Object.defineProperty(l,c,n[c]?n[c]:{get(){return e[c]},set(){return!0}})}return l});return u.push(new Proxy({get(s){return r.has(s)?void 0:e[s]},has(s){return r.has(s)?!1:s in e},keys(){return Object.keys(e).filter(s=>!r.has(s))}},ee)),u}let ye=0;function Ce(){const e=M.context;return e?`${e.id}${e.count++}`:`cl-${ye++}`}function Pe(e){const t="fallback"in e&&{fallback:()=>e.fallback};return S(de(()=>e.each,e.children,t||void 0))}function Oe(e){let t=!1;const r=e.keyed,n=S(()=>e.when,void 0,{equals:(u,s)=>t?u===s:!u==!s});return S(()=>{const u=n();if(u){const s=e.children,l=typeof s=="function"&&s.length>0;return t=r||l,l?m(()=>s(u)):s}return e.fallback})}function Te(e){let t=!1,r=!1;const n=W(()=>e.children),u=S(()=>{let s=n();Array.isArray(s)||(s=[s]);for(let l=0;l<s.length;l++){const o=s[l].when;if(o)return r=!!s[l].keyed,[l,o,s[l]]}return[-1]},void 0,{equals:(s,l)=>s[0]===l[0]&&(t?s[1]===l[1]:!s[1]==!l[1])&&s[2]===l[2]});return S(()=>{const[s,l,o]=u();if(s<0)return e.fallback;const c=o.children,a=typeof c=="function"&&c.length>0;return t=r||a,a?m(()=>c(l)):c})}function je(e){return e}export{se as $,Pe as F,je as M,Te as S,ie as a,S as b,$ as c,Ee as d,ue as e,be as f,me as g,le as h,Se as i,Ae as j,xe as k,we as l,ke as m,Oe as n,oe as o,Ce as p,ve as q,M as s,m as u};
