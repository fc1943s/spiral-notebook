---

title: node


keywords: fastai
sidebar: home_sidebar



nb_path: "03_algo_network.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 03_algo_network.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">lib_py.ipython_magic</span> <span class="k">as</span> <span class="nn">ipython_magic</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="encode">encode<a class="anchor-link" href="#encode"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">node</span> export

export var encode = (value: string) =&gt; {
    return new Uint8Array(Buffer.from(value, &quot;base64&quot;))
}
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;magic:d63530966f8b4b2ea61da8fccf96bca2&gt;
</pre>
</div>
</div>

<div class="output_area">




<div id="4d3e5de3-c9db-47a2-becb-01fdd1a843e5" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#4d3e5de3-c9db-47a2-becb-01fdd1a843e5');
IPython.notebook.save_checkpoint();
</script>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;algo_network.ts&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="newClient">newClient<a class="anchor-link" href="#newClient"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">node</span> export

import algosdk from &quot;algosdk&quot;

export var newClient = (token: string, server: string, port: number) =&gt; {
    return new algosdk.Algodv2(token, server, port)
}
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;algo_network.ts&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="deployApplication">deployApplication<a class="anchor-link" href="#deployApplication"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">node</span> export

export var deployApplication = async (
    client: algosdk.Algodv2,
    address: string,
    privateKey: string,
    applicationStartTeal: string, 
    clearProgramTeal: string, 
    options = {
        numGlobalByteSlices: 0,
        numGlobalInts: 0,
        numLocalByteSlices: 0,
        numLocalInts: 0
    }) =&gt; {
    try {
        const suggestedParams = await client.getTransactionParams().do()
        suggestedParams.flatFee = true
        suggestedParams.fee = 1000

        const applicationStartCompiled = await client.compile(applicationStartTeal).do()
        const clearProgramCompiled = await client.compile(clearProgramTeal).do()

        const txn = algosdk.makeApplicationCreateTxnFromObject({
            suggestedParams,
            from: address,
            onComplete: algosdk.OnApplicationComplete.NoOpOC,
            approvalProgram: encode(applicationStartCompiled.result),
            clearProgram: encode(clearProgramCompiled.result),
            ...options
        })

        const txnSigned = txn.signTxn(encode(privateKey))
        const { txId } = await client.sendRawTransaction(txnSigned).do()
        const transactionResponse = await algosdk.waitForConfirmation(client, txId, 5)
        const appId = transactionResponse[&quot;application-index&quot;]

        return {
            suggestedParams,
            applicationStartCompiled,
            clearProgramCompiled,
            txn,
            txnSigned,
            txId,
            transactionResponse,
            appId
        }
    } catch (e) {
        console.log(`algo_network.deployApplication() rethrowing error: ${e}`)
        throw e
    }
}
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;algo_network.ts&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="python">python<a class="anchor-link" href="#python"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NetworkInteraction">NetworkInteraction<a class="anchor-link" href="#NetworkInteraction"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NetworkInteraction" class="doc_header"><code>class</code> <code>NetworkInteraction</code><a href="https://github.com/fc1943s/tictactoe_spiral/lib_py/algo_network.py#L15" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NetworkInteraction</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_default_suggested_params">get_default_suggested_params<a class="anchor-link" href="#get_default_suggested_params"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_default_suggested_params" class="doc_header"><code>get_default_suggested_params</code><a href="https://github.com/fc1943s/tictactoe_spiral/lib_py/algo_network.py#L103" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_default_suggested_params</code>(<strong><code>client</code></strong>:<code>AlgodClient</code>)</p>
</blockquote>
<p>Gets default suggested params with flat transaction fee and fee amount of 1000.
:param client:
:return:</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ApplicationTransactionRepository">ApplicationTransactionRepository<a class="anchor-link" href="#ApplicationTransactionRepository"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ApplicationTransactionRepository" class="doc_header"><code>class</code> <code>ApplicationTransactionRepository</code><a href="https://github.com/fc1943s/tictactoe_spiral/lib_py/algo_network.py#L121" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ApplicationTransactionRepository</code>()</p>
</blockquote>
<p>Initializes transaction related to applications.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ASATransactionRepository">ASATransactionRepository<a class="anchor-link" href="#ASATransactionRepository"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ASATransactionRepository" class="doc_header"><code>class</code> <code>ASATransactionRepository</code><a href="https://github.com/fc1943s/tictactoe_spiral/lib_py/algo_network.py#L205" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ASATransactionRepository</code>()</p>
</blockquote>
<p>Initializes transactions related to Algorand Standard Assets</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="PaymentTransactionRepository">PaymentTransactionRepository<a class="anchor-link" href="#PaymentTransactionRepository"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PaymentTransactionRepository" class="doc_header"><code>class</code> <code>PaymentTransactionRepository</code><a href="https://github.com/fc1943s/tictactoe_spiral/lib_py/algo_network.py#L428" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PaymentTransactionRepository</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>


